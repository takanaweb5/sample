<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>Sample</title>
<link href="https://vjs.zencdn.net/7.10.2/video-js.css" rel="stylesheet" />
<style type="text/css">
<!--
    .video-js{
    font-size: 14px;
    }

    .video-js .vjs-load-progress div,.vjs-seeking .vjs-big-play-button,.vjs-waiting .vjs-big-play-button {
    display: none!important
    }
    .video-js .vjs-play-progress:before,.video-js .vjs-progress-control .vjs-play-progress:before,.video-js .vjs-remaining-time,.video-js .vjs-volume-level:after,.video-js .vjs-volume-level:before,.video-js.vjs-live .vjs-time-control.vjs-current-time,.video-js.vjs-live .vjs-time-control.vjs-duration,.video-js.vjs-live .vjs-time-control.vjs-time-divider,.video-js.vjs-no-flex .vjs-time-control.vjs-remaining-time {
    display: none
    }

.video-js .vjs-progress-control {
    position: absolute;
    left: 0;
    right: 0;
    width: 100%;
    height: .5em;
    top: -.5em
}

.video-js .vjs-progress-control .vjs-load-progress,.video-js .vjs-progress-control .vjs-play-progress,.video-js .vjs-progress-control .vjs-progress-holder {
    height: 100%
}

.video-js .vjs-progress-control .vjs-progress-holder {
    margin: 0
}

.video-js .vjs-progress-control:hover {
    height: 1.2em;
    top: -1.2em
}

.video-js .vjs-control-bar {
    background-color: rgba(0,0,0,0.3) !important;
    color: #ffffff;
}

.video-js .vjs-play-progress {
    background-color: #cc181e
}

.video-js .vjs-load-progress {
    background: rgba(255,255,255,0.3);
}

.video-js .vjs-fullscreen-control {
    position: absolute;
    right: 10px;
}

.video-js .vjs-big-play-button{ 
    font-size: 2.5em;
    line-height: 2.3em;
    height: 2.5em;
    width: 2.5em;
    -webkit-border-radius: 2.5em;
    -moz-border-radius: 2.5em;
    border-radius: 2.5em;
    background-color: rgba(115,133,159,.5);
    border-width: 0.12em;
    margin-top: -1.25em;
    margin-left: -1.75em;
    }

    .video-js.vjs-paused .vjs-big-play-button{ 
    display: block;
    }
    .video-js.vjs-error .vjs-big-play-button{
    display: none;
    }
    .video-js .vjs-control-bar{ 
    display: flex;
    }

    .video-js div{ 
    display: inline;
    }

    .video-js .vjs-remaining-time{display: none;}

    .vjs-button > .vjs-icon-placeholder:before{
    font-size: 22px;
    line-height: 1.9;
    }

    .video-js .vjs-time-control{
        display:inline;
        padding-left: 0px;
        padding-right: 0px;
    }

    .video-js .vjs-time-control span{
        vertical-align: center;
        font-size: 17px;
    }
    .video-js .vjs-time-divider{
        text-align: center;
    }

    /* .video-js .vjs-playback-rate .vjs-playback-rate-value{
    line-height: 2.4;
    font-size: 17px;
    } */

    /* .changeRate {
        padding-left: 20px;
    } */

    .timeValue button{
        display:inline;
        vertical-align: center;
        padding-left: 0px;
        padding-right: 0px;
        line-height: 2.4;
        font-size: 17px;
    }

    .changeRate button{
        display:inline;
        vertical-align: center;
        padding-left: 0px;
        padding-right: 0px;
        line-height: 2.4;
        font-size: 17px;
    }

/* ○ */
.skip {
    display:flex;
	content: "10";
	font-size: 20px;
	position: relative;
	margin: 0.2em auto 0;
	width: 1.2em;
	height: 1.2em;
	border-top: 0.1em solid #39a9d6;
	border-left: 0.1em solid #39a9d6;
	border-right: 0.1em solid transparent;
	border-bottom: 0.1em solid #39a9d6;
	border-radius: 100% 100% 100% 100%;
/* 	transform: rotate(-45deg); */
}

/* △ */
.skip::before {
	content: "";
	position: absolute;
	top: 0;
	left: 0.9em;
	width: 0;
	height: 0;
	border-top: 0.25em solid transparent;
	border-left: 0.5em solid #39a9d6;
	border-bottom: 0.25em solid transparent;
	transform: rotate(45deg);
}

.num:before {
	font-size: 70%;
	content: "10";
	position: absolute;
	top: 15%;
	left: 15%;
	width: 0;
	height: 0;
}


--> 
</style>
<script src="https://vjs.zencdn.net/7.10.2/video.min.js"></script>
<script>
    /* const url ='https://r5---sn-3pm76n7r.googlevideo.com/videoplayback?expire=1621276591&ei=T2OiYMjTHNaOs8IPrKSOgAo&ip=2404%3A7a84%3A5180%3Aee00%3Acd27%3A1520%3A6da0%3A2f14&id=o-AO-x1clpzgQNpBlLjvYijIno7HlNsAiYenvAD0jOAv3t&itag=22&source=youtube&requiressl=yes&hcs=ir%2C&mh=qJ&mm=31%2C26&mn=sn-3pm76n7r%2Csn-oguelnl7&ms=au%2Conr&mv=m&mvi=5&pl=31&rmhost=r6---sn-3pm76n7r.googlevideo.com%2C&shardbypass=yes&ctier=A&pfa=5&initcwndbps=970000&hightc=yes&vprv=1&mime=video%2Fmp4&ns=b_AUqI35-B5GVg_VoGp9xT8F&cnr=14&ratebypass=yes&dur=9685.019&lmt=1621218727367025&mt=1621254537&fvip=1&fexp=24001373%2C24007246&c=WEB&txp=7316222&n=pUN6jRGw6wyftbIR&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cctier%2Cpfa%2Chightc%2Cvprv%2Cmime%2Cns%2Ccnr%2Cratebypass%2Cdur%2Clmt&sig=AOq0QJ8wRQIgRxKQvAFpjTiOvCrtZocmuLv6yczw8VHLIh8v0qCWsqoCIQCaxQVHCeWzwYfLq2Nnz7epKOPRWWJ5QUfuXEyHa7UkbQ%3D%3D&lsparams=hcs%2Cmh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%2Crmhost%2Cshardbypass%2Cinitcwndbps&lsig=AG3C_xAwRQIhAIz8shcnRqaIT6UbEfZ_VhX4Y6Y72TE-VNg8m6qkDeuaAiBW6eG7erjIxzNjeVJYH7sK3R6Wy79DlefVrFIuCQ4VVQ%3D%3D'; */
const url ='file:///Z:/aaa.mp4';
let player;

onLoad = function() {
    player = videojs('my-player', { 
        controls: true, // Whether to show the control bar
        preload: 'auto',
        autoplay: false,
        // fluid: true, // Adaptive Width and Height
        muted: false, // Mute or not
        /* inactivityTimeout: false, */
        controlBar: { // Set Control Bar Component
        /* Set the properties and display of the components in the control bar
        'currentTimeDisplay':true,
        'timeDivider':true,
        'durationDisplay':true,
        'remainingTimeDisplay':false,
        volumePanel: {
        inline: false,
        }
        */
        /* The children form allows you to control the position and display of each control */
        children: [
        {name: 'playToggle'},         // Play button
        {name: 'progressControl'},    // Play progress bar
        {name: 'currentTimeDisplay'}, // Current Played Time
        {name: 'TimeDivider'},        // '/''
        {name: 'durationDisplay'},    // Total Time
        /* {name: 'playbackRateMenuButton',
               playbackRates: [1.0,1,1,1.2,1.3,1.4]
        }, */
        {name: 'volumePanel', // Volume control
               inline: true, // Do not use horizontal mode
        },
        {name: 'FullscreenToggle'}, // Full screen
        ]
    },
    // sources:[ // Video Source
    //     {
    //         src: url,
    //         type: 'video/mp4',
    //     }
    // ]
    }, function (){
        //   console.log('The video is ready to play',this);
        //   var lll = player.getChild("controlBar").getChild("currentTimeDisplay");
        // //   console.log(lll.show);
        //   lll.show;
        //   console.log(lll.hide());
        // //   lll.el().style.width = 100;
        //   lll.el().style.height = 100;
          
        //   console.log(lll.currentHeight());
        //   console.log(lll.currentWidth());
});
    // var l = player.getChild("controlBar").getChild("currentTimeDisplay");
    // console.log(l);

    let Component = videojs.getComponent('Component');

    let rateSpeed = new Component(player);
    rateSpeed.el().innerHTML = `
<div class="changeRate">
<button onClick="changeRate(-0.1)" >&emsp;◀</button>
<button onClick="setRate(1.0)" class="ratevalue" id="ratevalue">1.0x</button>
<button onClick="changeRate(+0.1)" >▶&emsp;</button>
</div>
`
    player.getChild("controlBar").addChild(rateSpeed, {}, 5);

    let currentTime = new Component(player);
    currentTime.el().innerHTML = `
<div class="timeValue">
<button id=time>&nbsp;--:--</button>
<button>&thinsp;/&thinsp;</button>
<div class="skip"><div class="num"></div></div>
<button id="duration">--:--</button>
</div>
`

    player.getChild("controlBar").addChild(currentTime, {}, 6);

    player.on("ratechange",function(){
        const ratevalue = document.getElementById("ratevalue");
        ratevalue.innerHTML = (player.playbackRate()).toFixed(1) + 'x'; 
    });
    player.on("timeupdate",function(){
        const time = document.getElementById("time");
        time.innerHTML = '&nbsp;' + numToTime(player.currentTime()); 
    });

    player.on("canplay",function(){
        const duration = document.getElementById("duration");
        duration.innerHTML = numToTime(player.duration()); 
    });

    console.log(player.getChild("controlBar").el());
// 参考
// https://programmer.help/blogs/record-the-use-and-problems-of-a-wave-of-video.js.html
};
window.onload = onLoad;

onOpen = function() {
    const data = {
        src: url,
        type: 'video/mp4',
    };
    player.pause();
    player.src(data);
    player.load(data);
};

changeRate = function(rate) {
    const newRate = (player.playbackRate() + rate).toFixed(1);
    player.playbackRate(newRate);
};

setRate = function(rate) {
    player.playbackRate(rate);
};

function numToTime(num) {
    const h = Math.floor(num % (24 * 60 * 60) / (60 * 60));
    const m = Math.floor(num % (24 * 60 * 60) % (60 * 60) / 60);
    const s = Math.floor(num % (24 * 60 * 60) % (60 * 60) % 60);
    const ss = ( '00' + s ).slice( -2 );
    const mm = ( '00' + m ).slice( -2 );

    if (h==0) {
        return m + ':' + ss;
    }
    return h + ':' + mm + ':' + ss;
}


</script>
</head>
<body>
    <button type="button" onClick="onOpen()">開く</button>
    <button type="button" onClick="onClick()">テスト</button>
    <textarea id="url"></textarea>
    <video id="my-player" class="video-js vjs-big-play-centered" 
        width="800"
        height="450"
        >
    </video>
</body>
</html>


